<ion-view title="Users" cache="false">
	<ion-nav-title class="pmfont">Users</ion-nav-title>
    <ion-content padding="true" class="has-header">
		<ion-refresher pulling-text="Pull to refresh..." on-refresh="doRefresh()"></ion-refresher>
		<p ng-if="!authData"><button ui-sref="login" class="button button-block button-positive">Sign In</button></p>
		<div class="list list-inset">
		  <label class="item item-input">
			<i class="icon ion-search placeholder-icon"></i>
			<input type="text" ng-model="searchText" placeholder="Search">
		  </label>
		</div>
		<div class="button-bar filterbar">
			<button ng-click="order('lastName')" class="button button-small" ng-class="predicate == 'lastName' ? 'button-positive icon-right' : 'button-stable'">Last Name <i ng-if="predicate == 'lastName'" ng-class="reverse ? 'ion-arrow-down-b' : 'ion-arrow-up-b'"></i></button>
			<button ng-click="order('title')" class="button button-small" ng-class="predicate == 'title' ? 'button-positive icon-right' : 'button-stable'">Title <i ng-if="predicate == 'title'" ng-class="reverse ? 'ion-arrow-down-b' : 'ion-arrow-up-b'"></i></button>
		</div>
		<div class="button-bar filterbar">
			<button ng-click="choice='A'" class="button button-small" ng-model="choice" ng-value="'A'" ng-class="choice == 'A' ? 'button-positive icon-right' : 'button-stable'">Deacons</button>
			<button ng-click="choice='B'" class="button button-small" ng-model="choice" ng-value="'B'" ng-class="choice == 'B' ? 'button-positive icon-right' : 'button-stable'">Teachers</button>
			<button ng-click="choice='C'" class="button button-small" ng-model="choice" ng-value="'C'" ng-class="choice == 'C' ? 'button-positive icon-right' : 'button-stable'">Priests</button>
		</div>
        <div class="list card" ng-show="users">
			<div class="item item-divider">All Users {{users.length}}</div>
			<div class="item item-avatar" ng-repeat="user in users | orderBy: predicate : reverse | filter: filterUsers()" ui-sref="tabsController.users-detail({ userId: user.$id })">
				<img ng-src="{{user.avatarUrl ? user.avatarUrl : defaultAvatarUrl}}">
				{{user.displayName}}<span ng-if="uid == user.$id"> (ME!)</span>
			</div>
        </div>
    </ion-content>
</ion-view>