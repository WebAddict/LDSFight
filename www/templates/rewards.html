<ion-view title="Rewards">
	<ion-nav-title class="pmfont">Rewards</ion-nav-title>
    <ion-content padding="true" class="has-header">
		<ion-refresher pulling-text="Pull to refresh..." on-refresh="doRefresh()"></ion-refresher>
		<p ng-if="!authData"><button ui-sref="login" class="button button-block button-positive">Sign In</button></p>
		<div class="button-bar filterbar">
			<button ng-click="order('dateClaim')" class="button button-small" ng-class="predicate == 'dateClaim' ? 'button-positive icon-right' : 'button-stable'">Available <i ng-if="predicate == 'dateClaim'" ng-class="reverse ? 'ion-arrow-down-b' : 'ion-arrow-up-b'"></i></button>
			<button ng-click="order('title')" class="button button-small" ng-class="predicate == 'title' ? 'button-positive icon-right' : 'button-stable'">Title <i ng-if="predicate == 'title'" ng-class="reverse ? 'ion-arrow-down-b' : 'ion-arrow-up-b'"></i></button>
		</div>
		<div class="list card" ng-repeat="reward in rewards | orderBy: predicate : reverse | filter: filterRewards()">
			<div class="item item-text-wrap" ui-sref="tabsController.rewards-detail({ rewardId: reward.$id })">
			  <h1>{{reward.displayName}}</h1>
			  <p ng-show="reward.donatedBy">Donated by {{reward.donatedBy}}</p>
			</div>
			<div class="item item-image" ng-if ="reward.imgSrc" ui-sref="tabsController.rewards-detail({ rewardId: reward.$id })">
				<img ng-src="{{reward.imgSrc}}" class="full-image">
			</div>
			<div class="item item-text-wrap" ng-if="!reward.isClaimed && reward.dateClaim">
			Can be claimed starting in <span countdown='' date='{{reward.dateClaim}}'>{{reward.dateClaim}}</span>
			</div>
			<div class="item item-text-wrap" ng-show="reward.dateAwarded">
			Will be Awarded in <span countdown='' date='{{reward.dateAwarded}}'>{{reward.dateAwarded}}</span>
			</div>
		</div>
    </ion-content>
</ion-view>